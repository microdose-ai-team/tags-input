{"version":3,"file":"tags-input.js","names":["SEPARATOR","COPY_PROPS","tagsInput","input","inputID","base","document","createElement","className","classList","add","tabIndex","type","getAttribute","editable","id","forEach","prop","undefined","appendChild","insertAdjacentElement","tags","Set","updateInput","value","Array","from","join","dispatchEvent","Event","bubbles","renderTags","querySelectorAll","t","remove","tag","span","textContent","dataset","insertBefore","addTag","text","parts","split","map","trim","filter","Boolean","changed","part","has","removeTag","delete","addEventListener","e","includes","key","preventDefault","last","pop","setTimeout","target","contains","focus","val","clear","isArray"],"sourceRoot":"src","sources":["src/tags-input.js"],"sourcesContent":["const SEPARATOR = ',';\nconst COPY_PROPS = [\n  'placeholder', 'pattern', 'spellcheck', 'autocomplete',\n  'autocapitalize', 'autofocus', 'accessKey', 'accept', 'lang',\n  'minLength', 'maxLength', 'required'\n];\n\nexport default function tagsInput(input, inputID) {\n  const base = document.createElement('div');\n  base.className = 'tags-input';\n  input.classList.add('hidden');\n  input.tabIndex = -1;\n\n  const type = input.getAttribute('type') || 'text';\n  const editable = document.createElement('input');\n  editable.id = `${inputID}-editable`;\n  editable.type = type;\n\n  COPY_PROPS.forEach(prop => {\n    if (input[prop] !== undefined) {\n      editable[prop] = input[prop];\n    }\n  });\n\n  base.appendChild(editable);\n  input.insertAdjacentElement('afterend', base);\n\n  const tags = new Set();\n\n  const updateInput = () => {\n    input.value = Array.from(tags).join(SEPARATOR);\n    input.dispatchEvent(new Event('input', { bubbles: true }));\n    input.dispatchEvent(new Event('change', { bubbles: true }));\n  };\n\n  const renderTags = () => {\n    [...base.querySelectorAll('.tag')].forEach(t => t.remove());\n    tags.forEach(tag => {\n      const span = document.createElement('span');\n      span.className = 'tag';\n      span.textContent = tag;\n      span.dataset.tag = tag;\n      base.insertBefore(span, editable);\n    });\n  };\n\n  const addTag = (text) => {\n    const parts = text.split(SEPARATOR).map(t => t.trim()).filter(Boolean);\n    let changed = false;\n    for (const part of parts) {\n      if (!tags.has(part)) {\n        tags.add(part);\n        changed = true;\n      }\n    }\n    if (changed) {\n      renderTags();\n      updateInput();\n    }\n  };\n\n  const removeTag = (tag) => {\n    if (tags.delete(tag)) {\n      renderTags();\n      updateInput();\n    }\n  };\n\n  editable.addEventListener('keydown', e => {\n    if (['Enter', 'Tab', ','].includes(e.key)) {\n      e.preventDefault();\n      if (editable.value.trim()) {\n        addTag(editable.value);\n        editable.value = '';\n      }\n    } else if (e.key === 'Backspace' && !editable.value) {\n      const last = [...tags].pop();\n      if (last) removeTag(last);\n    }\n  });\n\n  editable.addEventListener('blur', () => {\n    if (editable.value.trim()) {\n      addTag(editable.value);\n      editable.value = '';\n    }\n  });\n\n  editable.addEventListener('paste', () => {\n    setTimeout(() => {\n      if (editable.value.trim()) {\n        addTag(editable.value);\n        editable.value = '';\n      }\n    }, 0);\n  });\n\n  base.addEventListener('click', e => {\n    if (e.target.classList.contains('tag')) {\n      removeTag(e.target.dataset.tag);\n    } else {\n      editable.focus();\n    }\n  });\n\n  // Initialize with existing input value\n  if (input.value) addTag(input.value);\n\n  // Expose public API\n  return {\n    get value() {\n      return Array.from(tags);\n    },\n    set value(val) {\n      tags.clear();\n      if (val) addTag(Array.isArray(val) ? val.join(SEPARATOR) : val);\n    },\n    add: addTag,\n    remove: removeTag\n  };\n}\n"],"mappings":"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","ignoreList":[]}